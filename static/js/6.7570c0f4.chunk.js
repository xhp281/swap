(this["webpackJsonp@uniswap/interface"]=this["webpackJsonp@uniswap/interface"]||[]).push([[6],{1956:function(e,t,n){},1958:function(e,t,n){},1959:function(e,t,n){},2007:function(e,t,n){"use strict";n.r(t);var r,c=n(26),s=n(3),a=n.n(s),i=n(16),o=n(8),l=n(7),u=n(2),b=n(66),d=n(120),j=n(18),f=n(271),g=n(4),O=n(43),p=n(34),h=n(142),x=n(10),m=n(23),v=n(38),w=n(87),N=n(777),I=n(781),E=n(41),A=n(123),k=n(1),y=n(1057),z=n(70),S=n(11),T=n(783),C=(n(156),n(295),n(1956),n(0)),P=u.default.div.withConfig({componentId:"sc-rcepl8-0"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin-bottom:8px;padding:12px 16px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),R=Object(u.default)(y.a).withConfig({componentId:"sc-rcepl8-1"})(["width:14px;margin-right:4px;color:",";"],(function(e){return e.theme.accentWarning})),_=Object(u.default)(S.s.BodyPrimary).withConfig({componentId:"sc-rcepl8-2"})(["align-items:center;color:",";display:flex;justify-content:center;margin:12px 0 !important;text-align:center;"],(function(e){return e.theme.accentWarning})),L=function(e){var t=e.disabled,n=e.children,r=e.onClick;return Object(C.jsx)(v.c,{as:"button",color:"explicitWhite",className:"m29kpj4 rgw6ezcp rgw6ezb1 rgw6ez7lj rgw6ez2l7 rgw6ez24p rgw6ez4jv rgw6ez7fb rgw6ez77v rgw6ezd1 rgw6ez76b rgw6ez441 rgw6ez3q7",disabled:t,onClick:r,children:n})},B=function(e){var t=e.children;return t?Object(C.jsxs)(_,{fontSize:"14px",lineHeight:"20px",children:[Object(C.jsx)(R,{}),t]}):null},G=[E.d.FETCHING_ROUTE,E.d.CONFIRMING_IN_WALLET,E.d.FETCHING_FINAL_ROUTE,E.d.PROCESSING_TRANSACTION],D=function(e){var t=e.totalEthPrice,n=e.totalUsdPrice,r=e.bagStatus,c=e.fetchAssets,s=e.eventProperties,a=Object(z.r)(),i=Object(j.useWeb3React)(),o=i.account,u=i.chainId,b=i.connector,f=Boolean(o&&u),y=Object(N.a)((function(e){return e.setBagExpanded})),R=Object(I.a)().balance,_=Object(k.useMemo)((function(){if(f&&u===x.e.MAINNET)return Object(d.parseEther)(R).gte(t)}),[f,u,R,t]),D=Object(k.useMemo)((function(){var e=c,t=Object(C.jsx)(g.b,{id:"Something went wrong"}),n=!0,s=null;return f&&u!==x.e.MAINNET?(e=function(){return Object(T.a)(b,x.e.MAINNET)},t=Object(C.jsx)(g.b,{id:"Switch networks"}),n=!1,s=Object(C.jsx)(g.b,{id:"Wrong network"})):!1===_?(t=Object(C.jsx)(g.b,{id:"Pay"}),n=!0,s=Object(C.jsx)(g.b,{id:"Insufficient funds"})):r===E.d.WARNING?s=Object(C.jsx)(g.b,{id:"Something went wrong. Please try again."}):f?r===E.d.FETCHING_FINAL_ROUTE||r===E.d.CONFIRMING_IN_WALLET?(n=!0,t=Object(C.jsx)(g.b,{id:"Proceed in wallet"})):r===E.d.PROCESSING_TRANSACTION?(n=!0,t=Object(C.jsx)(g.b,{id:"Transaction pending"})):!0===_&&(n=!1,t=Object(C.jsx)(g.b,{id:"Pay"})):(e=function(){a(),y({bagExpanded:!1})},n=!1,t=Object(C.jsx)(g.b,{id:"Connect wallet"})),{buttonText:t,disabled:n,warningText:s,handleClick:e}}),[r,u,f,b,c,y,_,a]),F=D.buttonText,M=D.disabled,U=D.warningText,W=D.handleClick,H=G.includes(r);return Object(C.jsx)(v.b,{className:"rgw6ez2aj rgw6ez2g1",children:Object(C.jsxs)(P,{children:[Object(C.jsxs)(v.b,{gap:"4",paddingTop:"8",paddingBottom:"20",children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",children:[Object(C.jsx)(m.b,{children:Object(C.jsx)(S.s.HeadlineSmall,{children:"Total"})}),Object(C.jsx)(m.b,{children:Object(C.jsxs)(S.s.HeadlineSmall,{children:[Object(A.o)(t.toString()),"\xa0ETH"]})})]}),Object(C.jsx)(v.c,{justifyContent:"flex-end",color:"textSecondary",className:w.c,children:"".concat(Object(A.h)(n,!0))})]}),Object(C.jsxs)(O.TraceEvent,{events:[p.BrowserEvent.onClick],name:p.EventName.NFT_BUY_BAG_PAY,element:p.ElementName.NFT_BUY_BAG_PAY_BUTTON,properties:Object(l.a)({},s),shouldLogImpression:f&&!M,children:[Object(C.jsx)(B,{children:U}),Object(C.jsxs)(L,{onClick:W,disabled:M,children:[H&&Object(C.jsx)(h.a,{size:"20px",stroke:"white"}),F]})]})]})})},F=n(53),M=n(541),U=n(56),W=n(50),H=n(36),V=n(281),q=n(546),Y=n(251),J=n(1932),Q=n(1928),X=n(122),K=n(323),Z=function(e){var t=e.sectionTitle,n=e.caption,r=void 0===n?void 0:n,c=e.title,s=void 0===c?void 0:c,l=e.rows,u=e.index,b=e.openIndex,d=e.isSuccessScreen,j=void 0!==d&&d,f=Object(k.useState)(!1),g=Object(o.a)(f,2),O=g[0],p=g[1],h=l.some((function(e){return e.status!==E.f.APPROVED})),x=Object(H.o)((function(e){return e.sellAssets})),N=Object(H.o)((function(e){return e.removeAssetMarketplace})),I=function(e){if(1===u){var t,n=Object(F.a)(x);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.asset_contract.address===e.collectionAddress&&N(r,e.marketplace)}}catch(c){n.e(c)}finally{n.f()}}else N(e.asset,e.marketplace)};function A(e){var t,n,r=e,c=r.asset.newListings;return null!==(t=null===c||void 0===c||null===(n=c.find((function(e){return e.marketplace.name===r.marketplace.name})))||void 0===n?void 0:n.price)&&void 0!==t?t:0}Object(k.useEffect)((function(){p(u===b)}),[u,b]);var y=!h&&l.length>0&&!j;return Object(C.jsxs)(v.c,{flexWrap:"wrap",className:w.m,marginTop:"10",marginBottom:"10",onClick:function(){return l.length>0&&p(!O)},color:y?"accentSuccess":"textPrimary",children:[y&&Object(C.jsx)(U.e,{style:{marginRight:"8px"}}),t,!j&&Object(C.jsx)(U.s,{className:Object(X.default)("".concat(O?"":Q.c," ").concat(Q.b))}),(O||j)&&Object(C.jsxs)(v.b,{gap:"12",width:"full",paddingTop:j?"28":"auto",className:Object(X.default)(!j&&Q.e),children:[r&&Object(C.jsx)(m.b,{color:"textPrimary",fontWeight:"normal",className:r,children:r}),s&&Object(C.jsx)(m.b,{color:"textSecondary",className:w.a,children:s}),Object(C.jsx)(v.b,{gap:"8",children:l.map((function(e,t){var n;return Object(C.jsxs)(v.b,{gap:"8",children:[Object(C.jsxs)(v.c,{children:[e.images.map((function(t,n){return Object(C.jsx)(m.b,{as:"img",height:"20",width:"20",borderRadius:0===n&&e.collectionAddress?"round":"4",style:{zIndex:2-n},className:Q.d,src:t,alt:e.name},n)})),Object(C.jsx)(m.b,{marginLeft:"8",marginRight:"auto",fontWeight:"normal",color:"textPrimary",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:{sm:"max",md:e.status===E.f.REJECTED||e.status===E.f.FAILED?"120":"full"},className:w.c,children:e.name}),j?A(e)&&"".concat(Object(K.c)(Object(K.g)(null!==(n=A(e))&&void 0!==n?n:0).toString())," ETH"):e.status===E.f.APPROVED?Object(C.jsx)(U.e,{height:"20",width:"20"}):e.status===E.f.FAILED||e.status===E.f.REJECTED?Object(C.jsxs)(v.c,{gap:"4",children:[Object(C.jsx)(m.b,{fontWeight:"normal",fontSize:"14",color:"textSecondary",children:e.status}),Object(C.jsx)(U.D,{})]}):e.status===E.f.SIGNING&&Object(C.jsx)(U.M,{height:"20",width:"20",stroke:"#4673FA"})]}),(e.status===E.f.FAILED||e.status===E.f.REJECTED)&&Object(C.jsxs)(v.c,{gap:"8",justifyContent:"center",children:[Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"red400",height:"32",cursor:"pointer",style:{backgroundColor:"#FA2B391A"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.stopPropagation(),I(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Remove"}),Object(C.jsx)(m.b,{width:"120",as:"button",className:w.f,borderRadius:"12",border:"none",color:"genieBlue",height:"32",cursor:"pointer",style:{backgroundColor:"#4C82FB29"},onClick:function(){var t=Object(i.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.callback){t.next=4;break}return t.next=4,e.callback();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Try again"})]})]},t)}))})]})]})},$=n(1929),ee=function(){var e=Object(j.useWeb3React)().provider,t=Object(H.o)((function(e){return e.sellAssets})),n=null===e||void 0===e?void 0:e.getSigner(),r=Object(H.l)((function(e){return e.listings})),c=Object(H.l)((function(e){return e.setListings})),s=Object(H.l)((function(e){return e.collectionsRequiringApproval})),u=Object(H.l)((function(e){return e.setCollectionsRequiringApproval})),b=Object(k.useState)(0),d=Object(o.a)(b,2),f=d[0],g=d[1],h=Object(H.l)((function(e){return e.listingStatus})),x=Object(H.l)((function(e){return e.setListingStatus})),N=Object(k.useState)(!1),I=Object(o.a)(N,2),A=I[0],y=I[1],z=Object(H.l)((function(e){return e.looksRareNonce})),S=Object(H.l)((function(e){return e.setLooksRareNonce})),T=Object(H.l)((function(e){return e.getLooksRareNonce})),P=Object(H.f)((function(e){return e.toggleBag})),R=Object(k.useRef)(z),_=Object(H.j)(),L=Object(O.useTrace)({modal:p.ModalName.NFT_LISTING});Object(k.useEffect)((function(){H.l.subscribe((function(e){return R.current=e.looksRareNonce}))}),[]);var B=Object(k.useMemo)((function(){return Object($.d)(t)}),[t]),G=Object(k.useState)(0),D=Object(o.a)(G,2),X=D[0],K=D[1];Object(k.useEffect)((function(){Object(q.a)().then((function(e){K(e||0)}))}),[]);var ee=Object(l.a)({collection_addresses:t.map((function(e){return e.asset_contract.address})),token_ids:t.map((function(e){return e.tokenId})),marketplaces:Array.from(new Set(r.map((function(e){return e.marketplace.name})))),list_quantity:r.length,usd_value:X*B},L),te=Object(l.a)({list_quantity:r.length,usd_value:X*B},L);Object(k.useEffect)((function(){(null===s||void 0===s?void 0:s.length)&&y(s.every((function(e){return e.status===E.f.APPROVED}))),!A||h!==E.f.PENDING&&h!==E.f.CONTINUE&&h!==E.f.SIGNING||(ie(),se())}),[s,A]);var ne=Object(k.useMemo)((function(){return s.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[s]),re=Object(k.useMemo)((function(){return r.every((function(e){return e.status===E.f.APPROVED||e.status===E.f.PAUSED}))}),[r]);Object(k.useEffect)((function(){h===E.f.SIGNING&&ne&&re&&ie()}),[ne,re]);var ce=function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,c,i,o,b,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return Object(O.sendAnalyticsEvent)(p.EventName.NFT_SELL_START_LISTING,Object(l.a)({},ee)),x(E.f.SIGNING),t=M.b[M.a.MAINNET],e.next=7,n.getAddress();case 7:return r=e.sent,e.next=10,Object(V.k)(r);case 10:c=e.sent,S(null!==c&&void 0!==c?c:0),(null===s||void 0===s?void 0:s.some((function(e){return e.status===E.f.PAUSED})))||(x(E.f.SIGNING),g(1)),i=t.TRANSFER_MANAGER_ERC721,o=Object(F.a)(s),e.prev=15,o.s();case 17:if((b=o.n()).done){e.next=29;break}if(d=b.value,e.t0=Object($.h)(d.status),!e.t0){e.next=27;break}if(!_){e.next=26;break}return e.next=24,Object($.a)(d,s,u,n,i,ae);case 24:e.next=27;break;case 26:Object($.a)(d,s,u,n,i,ae);case 27:e.next=17;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(15),o.e(e.t1);case 34:return e.prev=34,o.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[15,31,34,37]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var t=Object(i.a)(a.a.mark((function t(){var s,i,o,u,b,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e){t.next=2;break}return t.abrupt("return");case 2:x(E.f.SIGNING),g(2),i=Object(F.a)(r),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=15;break}if(u=o.value,t.t0=Object($.h)(u.status),!t.t0){t.next=13;break}return t.next=13,Object($.g)(u,r,c,n,e,T,S,ae);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(5),i.e(t.t1);case 20:return t.prev=20,i.f(),t.finish(20);case 23:return b=r.every((function(e){return e.status===E.f.APPROVED})),d=r.some((function(e){return e.status===E.f.PAUSED})),b?(g(0),x(E.f.APPROVED)):d||x(E.f.FAILED),Object(O.sendAnalyticsEvent)(p.EventName.NFT_LISTING_COMPLETED,Object(l.a)({signatures_requested:r.length,signatures_approved:r.filter((function(e){return e.status===E.f.APPROVED}))},te)),t.t2=V.j,t.t3=r,t.next=31,null===n||void 0===n?void 0:n.getAddress();case 31:if(t.t5=s=t.sent,t.t4=null!==t.t5,!t.t4){t.next=35;break}t.t4=void 0!==s;case 35:if(!t.t4){t.next=39;break}t.t6=s,t.next=40;break;case 39:t.t6="";case 40:return t.t7=t.t6,t.next=43,(0,t.t2)(t.t3,t.t7);case 43:case"end":return t.stop()}}),t,null,[[5,17,20,23]])})));return function(){return t.apply(this,arguments)}}(),ae=function(){var e,t=Object(F.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.e)(n,s,u)}}catch(l){t.e(l)}finally{t.f()}var a,i=Object(F.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object($.e)(o,r,c)}}catch(l){i.e(l)}finally{i.f()}},ie=function(){var e,t=Object(F.a)(s);try{for(t.s();!(e=t.n()).done;){var n=e.value;Object($.f)(n,s,u)}}catch(l){t.e(l)}finally{t.f()}var a,i=Object(F.a)(r);try{for(i.s();!(a=i.n()).done;){var o=a.value;Object($.f)(o,r,c)}}catch(l){i.e(l)}finally{i.f()}},oe=Object(k.useMemo)((function(){return h===E.f.APPROVED}),[h]);return Object(C.jsx)(O.Trace,{modal:p.ModalName.NFT_LISTING,children:Object(C.jsxs)(v.b,{paddingTop:"20",paddingBottom:"20",paddingLeft:"12",paddingRight:"12",children:[Object(C.jsxs)(v.c,{className:w.k,marginBottom:"10",children:[_&&!oe&&Object(C.jsx)(m.b,{paddingTop:"4",marginRight:"4",onClick:P,children:Object(C.jsx)(U.p,{height:28,width:28})}),oe?"Success!":"Listing ".concat(t.length," NFTs"),Object(C.jsx)(m.b,{as:"button",border:"none",color:"textSecondary",backgroundColor:"backgroundSurface",marginLeft:"auto",marginRight:"0",paddingRight:"0",display:{sm:"flex",md:"none"},cursor:"pointer",onClick:P,children:Object(C.jsx)(U.ib,{height:28,width:28,fill:W.c.colors.textPrimary})})]}),Object(C.jsx)(v.b,{overflowX:"hidden",overflowY:"auto",style:{maxHeight:"60vh"},children:oe?Object(C.jsx)(O.Trace,{name:p.EventName.NFT_LISTING_COMPLETED,properties:Object(l.a)({list_quantity:r.length,usd_value:X*B},L),children:Object(C.jsx)(Z,{sectionTitle:"Listed ".concat(r.length," item").concat(Object(Y.a)(r.length)," for sale"),rows:r,index:0,openIndex:f,isSuccessScreen:!0})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Z,{sectionTitle:"Approve ".concat(s.length," collection").concat(Object(Y.a)(s.length)),title:"COLLECTIONS",rows:s,index:1,openIndex:f}),Object(C.jsx)(Z,{sectionTitle:"Confirm ".concat(r.length," listing").concat(Object(Y.a)(r.length)),caption:"Now you can sign to list each item",title:"NFTS",rows:r,index:2,openIndex:f})]})}),Object(C.jsx)("hr",{className:Q.f}),Object(C.jsxs)(v.c,{className:w.m,marginTop:"12",marginBottom:oe?"8":"20",children:["Return if sold",Object(C.jsxs)(v.c,{className:w.n,marginLeft:"auto",marginRight:"0",children:[B,"\xa0ETH"]})]}),oe?Object(C.jsxs)(m.b,{as:"span",className:w.g,color:"textSecondary",children:["Status:"," ",Object(C.jsx)(m.b,{as:"span",color:"accentSuccess",children:"Confirmed"})]}):Object(C.jsx)(J.a,{onClick:function(){ie(),A?se():ce()},buttonText:"Start listing",showWarningOverride:_}),(h===E.f.PENDING||h===E.f.SIGNING)&&Object(C.jsx)(m.b,{as:"button",border:"none",backgroundColor:"backgroundSurface",cursor:"pointer",color:"orange",className:Q.a,onClick:function(){ae()},type:"button",children:"Stop listing"})]})})},te=n(593),ne=n(1942),re=n(964),ce=n(235),se=n(616),ae=n.n(se),ie=(n(1958),n(39)),oe=n(37),le=Object(u.keyframes)(r||(r=Object(oe.a)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),ue=u.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],le,le,(function(e){return e.theme.accentActive})),be=function(){return Object(C.jsx)(m.b,{display:"flex",position:"absolute",children:Object(C.jsx)("svg",{height:"18px",width:"18px",children:Object(C.jsx)(ue,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},de=n(117),je=n(291),fe=n(64),ge=(n(1959),"_1kuawc1 rgw6ez2a7 rgw6ez2fp rgw6ez2kv rgw6ez24d rgw6ez4aj rgw6ez3pv rgw6ez76b rgw6ez1bp rgw6ez77v"),Oe="rgw6ez12p rgw6ez19d rgw6ez461 rgw6ez77n",pe="_1kuawc7",he="_1kuawcb rgw6ezb1 rgw6ezcv rgw6ez7if rgw6ez427 rgw6ez421",xe="rgw6ezcp rgw6ezav rgw6ez7lf rgw6ez7if rgw6ez421 rgw6ez427 rgw6ez4ap",me="rgw6ez3u7",ve="rgw6ez451 rgw6ez36j rgw6ez3c1",we=Object(u.default)(ie.p).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),Ne=Object(u.default)(ie.p).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),Ie=function(){return Object(C.jsx)(m.b,{position:"relative",background:"loadingBackground",className:Oe,children:Object(C.jsxs)(m.b,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",Object(C.jsx)("br",{}),"not",Object(C.jsx)("br",{}),"available"]})})},Ee=function(e){var t,n=e.asset,r=e.usdPrice,c=e.removeAsset,s=e.showRemove,a=e.grayscale,i=e.isMobile,l=Object(k.useState)(!1),u=Object(o.a)(l,2),b=u[0],j=u[1],f=Object(k.useState)(!n.smallImageUrl),g=Object(o.a)(f,2),O=g[0],p=g[1],h=Object(k.useState)(!1),x=Object(o.a)(h,2),w=x[0],N=x[1],I=Object(k.useCallback)((function(){return N(!0)}),[]),E=Object(k.useCallback)((function(){return N(!1)}),[]),y=Boolean(s&&w&&!i),z=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,S=Object(A.o)(z),T=Object(A.h)(r?parseFloat(Object(d.formatEther)(z))*r:r,!0),P=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),c([n])}),[n,c]);return Object(C.jsx)(fe.b,{to:Object(A.p)(n),style:{textDecoration:"none"},children:Object(C.jsxs)(v.c,{className:ge,onMouseEnter:I,onMouseLeave:E,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[Object(C.jsx)(m.b,{display:s&&i?"block":"none",className:ve,onClick:P,transition:"250",zIndex:"1",children:Object(C.jsx)(U.t,{})}),!O&&Object(C.jsx)(m.b,{as:"img",src:n.smallImageUrl,alt:n.name,className:Object(X.default)(Oe,a&&!w&&pe),onLoad:function(){j(!0)},onError:function(){p(!0)},visibility:b?"visible":"hidden"}),!b&&Object(C.jsx)(m.b,{position:"absolute",className:"".concat(Oe," ").concat(je.b)}),O&&Object(C.jsx)(Ie,{})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:a?"textSecondary":"textPrimary",children:[Object(C.jsxs)(v.c,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[Object(C.jsx)(m.b,{className:he,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&Object(C.jsx)(de.s,{})]}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:xe,children:n.collectionName}),n.collectionIsVerified&&Object(C.jsx)(U.hb,{className:me})]})]}),y&&Object(C.jsx)(we,{onClick:P,emphasis:ie.d.medium,size:ie.m.medium,children:"Remove"}),(!y||i)&&Object(C.jsxs)(v.b,{flexShrink:"0",alignItems:"flex-end",children:[Object(C.jsxs)(m.b,{className:"_1kuawc9 rgw6ez3p7 rgw6ezb1 rgw6ezd1 rgw6ez3u7",children:[S,"\xa0ETH"]}),Object(C.jsx)(m.b,{className:xe,children:T})]})]})})},Ae=function(e){var t,n=e.asset,r=e.usdPrice,c=e.markAssetAsReviewed,s=e.top,a=e.isMobile,i=b.a.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(b.a.from(n.priceInfo.ETHPrice)),o=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!1)}),[n,c]),l=Object(k.useCallback)((function(e){e.preventDefault(),e.stopPropagation();c(n,!0)}),[n,c]);return Object(C.jsxs)(v.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pj rgw6ez4aj rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5l1 rgw6ez1bp rgw6ez76b",borderTopColor:s?"backgroundOutline":"transparent",children:[Object(C.jsxs)(v.c,{className:"rgw6ezcp rgw6ezav rgw6ez7lf rgw6ez48p rgw6ez3p7",children:[i?Object(C.jsx)(U.Z,{}):Object(C.jsx)(U.Y,{}),Object(C.jsx)(m.b,{children:"Price ".concat(i?"increased":"decreased"," from ").concat(Object(A.o)(n.priceInfo.ETHPrice)," ETH")})]}),Object(C.jsx)(m.b,{style:{marginLeft:"-8px",marginRight:"-8px"},children:Object(C.jsx)(Ee,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:a})}),Object(C.jsxs)(v.c,{gap:"8",justifyContent:"space-between",children:[Object(C.jsx)(Ne,{onClick:o,emphasis:ie.d.medium,size:ie.m.small,children:"Remove"}),Object(C.jsx)(Ne,{onClick:l,emphasis:ie.d.high,size:ie.m.small,children:"Keep"})]})]})},ke=function(e){var t=e.assets;return Object(C.jsx)(v.b,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return Object(C.jsx)(m.b,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:pe},"".concat(e.address,"-").concat(e.tokenId))}))})},ye=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,c=e.didOpenUnavailableAssets,s=e.setDidOpenUnavailableAssets,a=e.isMobile,i=Object(k.useReducer)((function(e){return!e}),!1),l=Object(o.a)(i,2),u=l[0],b=l[1],d=Object(k.useState)(8),j=Object(o.a)(d,2),f=j[0],g=j[1];return Object(k.useEffect)((function(){if(f){var e=setInterval((function(){g(f-1)}),1e3);return function(){return clearInterval(e)}}c||(r(),s(!1))}),[f,r,c,s]),t&&0!==t.length?Object(C.jsxs)(v.b,{className:"rgw6ez2lj rgw6ez251 rgw6ezjv rgw6ezpd rgw6ez4ov rgw6ez3pv rgw6ez4aj rgw6ez76n rgw6ez7g3 rgw6ez50j rgw6ez5wv rgw6ez5l1 rgw6ez1bp",children:[1===t.length&&Object(C.jsx)(Ee,{asset:t[0],usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a}),t.length>1&&Object(C.jsxs)(v.b,{children:[Object(C.jsxs)(v.c,{justifyContent:"space-between",marginBottom:u?"12":"0",cursor:"pointer",onClick:function(){!c&&s(!0),b()},children:[Object(C.jsxs)(v.c,{gap:"12",color:"textPrimary",className:w.c,children:[!u&&Object(C.jsx)(ke,{assets:t.slice(0,5)}),"No longer available"]}),Object(C.jsx)(v.c,{color:"textSecondary",children:u?Object(C.jsx)(U.r,{}):Object(C.jsx)(U.o,{})}),!c&&Object(C.jsxs)(v.c,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:r,children:[Object(C.jsx)(be,{}),Object(C.jsx)(U.v,{})]})]}),Object(C.jsx)(v.b,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:u&&t.map((function(e){return Object(C.jsx)(Ee,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})]}):null},ze=function(){var e=Object(H.f)((function(e){return e.bagStatus})),t=Object(H.f)((function(e){return e.setBagStatus})),n=Object(H.f)((function(e){return e.markAssetAsReviewed})),r=Object(H.f)((function(e){return e.didOpenUnavailableAssets})),c=Object(H.f)((function(e){return e.setDidOpenUnavailableAssets})),s=Object(H.f)((function(e){return e.itemsInBag})),a=Object(H.f)((function(e){return e.setItemsInBag})),i=Object(H.f)((function(e){return e.removeAssetsFromBag})),o=Object(H.j)(),u=Object(k.useMemo)((function(){return Object(A.C)(s)}),[s]),b=Object(ce.useQuery)(["fetchPrice",{}],(function(){return Object(A.j)()}),{}).data,d=Object(k.useMemo)((function(){return{unchangedAssets:u.filter((function(e){return e.status===E.c.ADDED_TO_BAG||e.status===E.c.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:u.filter((function(e){return e.status===E.c.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:u.filter((function(e){return e.status===E.c.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:u.filter((function(e){return e.status!==E.c.UNAVAILABLE}))}}),[u]),j=d.unchangedAssets,f=d.priceChangedAssets,g=d.unavailableAssets,h=d.availableItems;return Object(k.useEffect)((function(){var n=f.length>0,r=u.length>0;n&&Object(O.sendAnalyticsEvent)(p.EventName.NFT_BUY_BAG_CHANGED,Object(l.a)({usd_value:b,bag_quantity:u},Object(A.k)(f))),e!==E.d.IN_REVIEW||n||t(r?E.d.CONFIRM_REVIEW:E.d.ADDING_TO_BAG)}),[e,u,f,t,b]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(v.b,{display:f.length>0||g.length>0?"flex":"none",children:[g.length>0&&Object(C.jsx)(O.Trace,{name:p.EventName.NFT_BUY_BAG_CHANGED,properties:Object(l.a)({usd_value:b,bag_quantity:u.length},Object(A.k)(g)),shouldLogImpression:!0,children:Object(C.jsx)(ye,{assets:g,usdPrice:b,clearUnavailableAssets:function(){return a(h)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:c,isMobile:o})}),f.map((function(e,t){return Object(C.jsx)(Ae,{asset:e,usdPrice:b,markAssetAsReviewed:n,top:0===t&&0===g.length,isMobile:o},e.id)}))]}),Object(C.jsx)(v.b,{gap:"8",children:j.slice(0).reverse().map((function(e){return Object(C.jsx)(Ee,{asset:e,usdPrice:b,removeAsset:i,showRemove:!0,isMobile:o},e.id)}))})]})},Se=n(317),Te=Object(u.default)(S.b).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),Ce=u.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),Se.a),Pe=u.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),Re=u.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 20px;text-align:center;"]),_e=function(e){var t=e.numberOfAssets,n=e.closeBag,r=e.resetFlow,c=e.isProfilePage,s=Object(k.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return Object(C.jsxs)(Re,{children:[Object(C.jsx)(S.s.HeadlineSmall,{children:c?Object(C.jsx)(g.b,{id:"Sell"}):Object(C.jsx)(g.b,{id:"Bag"})}),t>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(Pe,{sizing:s,children:t}),Object(C.jsx)(Te,{onClick:r,children:"Clear all"})]}),Object(C.jsx)(Ce,{onClick:n,children:Object(C.jsx)(U.j,{})})]})},Le=Object(u.default)(v.b).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),Be=function(){var e=Object(f.c)();return Object(C.jsxs)(Le,{children:[Object(C.jsx)(v.a,{children:e?Object(C.jsx)(U.K,{color:W.c.colors.textTertiary}):Object(C.jsx)(U.k,{color:W.c.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?Object(C.jsx)(v.a,{className:w.m,children:"No NFTs selected"}):Object(C.jsxs)(v.b,{gap:"16",children:[Object(C.jsx)(v.a,{className:w.m,style:{lineHeight:"24px"},children:"Your bag is empty"}),Object(C.jsx)(v.a,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},Ge=n(52),De=function(e){var t=e.asset,n=Object(H.o)((function(e){return e.removeSellAsset})),r=Object(H.j)(),c=Object(k.useState)(!1),s=Object(o.a)(c,2),a=s[0],i=s[1],l=function(){return i(!a)},u=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return Object(C.jsxs)(v.c,{className:ge,onMouseEnter:l,onMouseLeave:l,children:[Object(C.jsxs)(m.b,{position:"relative",display:"flex",children:[Object(C.jsx)(m.b,{display:r?"block":"none",className:ve,onClick:u,transition:"250",zIndex:"1",children:Object(C.jsx)(U.t,{})}),Object(C.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:Oe})]}),Object(C.jsxs)(v.b,{overflow:"hidden",width:"full",color:"textPrimary",children:[Object(C.jsx)(v.c,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:Object(C.jsx)(m.b,{className:he,children:t.name||"#".concat(t.tokenId)})}),Object(C.jsxs)(v.c,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[Object(C.jsx)(m.b,{className:xe,children:t.asset_contract.name}),t.collectionIsVerified&&Object(C.jsx)(U.hb,{className:me,fill:Ge.a.magentaVibrant})]})]}),a&&!r&&Object(C.jsx)(we,{onClick:u,emphasis:ie.d.medium,size:ie.m.medium,children:"Remove"})]})},Fe=function(){var e=Object(H.o)((function(e){return e.sellAssets}));return Object(C.jsx)(v.b,{children:e.length?e.map((function(e,t){return Object(C.jsx)(De,{asset:e},t)})):null})},Me=u.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;background:rgba(0,0,0,0.7);backdrop-filter:blur(12px);top:72px;width:100%;height:100%;"]),Ue=function(e){var t=e.top,n=e.show;return Object(C.jsx)(m.b,{marginX:"16",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})};t.default=function(){var e=Object(j.useWeb3React)(),t=e.account,n=e.provider,r=Object(H.o)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),ae.a),s=r.resetSellAssets,u=r.sellAssets,g=Object(H.m)((function(e){var t=e.setProfilePageState;return{profilePageState:e.state,setProfilePageState:t}}),ae.a),O=g.profilePageState,p=g.setProfilePageState,h=Object(H.f)((function(e){return Object(l.a)(Object(l.a)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),ae.a),x=h.bagStatus,N=h.setBagStatus,I=h.didOpenUnavailableAssets,y=h.setDidOpenUnavailableAssets,z=h.bagIsLocked,S=h.setLocked,T=h.reset,P=h.setItemsInBag,R=h.bagExpanded,_=h.toggleBag,L=h.setTotalEthPrice,B=h.setTotalUsdPrice,G=h.setBagExpanded,F=Object(H.f)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,M=Object(f.c)(),U=Object(f.a)(),W=Object(f.b)(),q=Object(H.j)(),Y=Object(H.p)((function(e){return e.sendTransaction})),J=Object(H.p)((function(e){return e.state})),Q=Object(H.p)((function(e){return e.setState})),X=Object(k.useRef)(J),K=Object(H.q)((function(e){return[e.setTransactionResponse]})),Z=Object(o.a)(K,1)[0],$=Object(ce.useQueryClient)(),se=Object(k.useMemo)((function(){return Object(A.C)(F)}),[F]),ie=Object(k.useState)(!1),oe=Object(o.a)(ie,2),le=oe[0],ue=oe[1],be=Object(k.useState)(!1),de=Object(o.a)(be,2),je=de[0],fe=de[1],ge=Object(k.useState)(0),Oe=Object(o.a)(ge,2),pe=Oe[0],he=Oe[1],xe=Object(ce.useQuery)(["fetchPrice",{}],(function(){return Object(A.j)()}),{}).data,me=Object(k.useMemo)((function(){var e=se.reduce((function(e,t){return t.status!==E.c.UNAVAILABLE?e.add(b.a.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),b.a.from(0));return{totalEthPrice:e,totalUsdPrice:xe?parseFloat(Object(d.formatEther)(e))*xe:void 0}}),[se,xe]),ve=me.totalEthPrice,we=me.totalUsdPrice,Ne=function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Y(null===n||void 0===n?void 0:n.getSigner(),se.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),t);case 4:!(r=e.sent)||X.current!==E.l.Success&&X.current!==E.l.Failed||(S(!1),ue(!1),Z(r),G({bagExpanded:!1}),T());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=Object(k.useCallback)((function(){G({bagExpanded:!1,manualClose:!0})}),[G]),Ee=function(){var e=Object(i.a)(a.a.mark((function e(){var n,r,s,i,o,l,u,d,j,f,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=se.filter((function(e){return e.status!==E.c.UNAVAILABLE})).map((function(e){return e.asset})),r=Object(A.a)(n.reduce((function(e,t){return e.add(b.a.from(t.priceInfo.ETHPrice))}),b.a.from(0)).toString()),I&&y(!1),!z&&S(!0),N(E.d.FETCHING_ROUTE),e.prev=5,e.next=8,$.fetchQuery(["assetsRoute",r,n,t],(function(){return Object(V.f)({toSell:[r],toBuy:n,senderAddress:null!==t&&void 0!==t?t:""})}));case 8:s=e.sent,i=Object(re.a)(n,s.route),o=i.filter((function(e){return e.updatedPriceInfo})).sort(A.F),l=i.filter((function(e){return e.isUnavailable})),u=i.filter((function(e){return!e.updatedPriceInfo&&!e.isUnavailable})),d=u.length>0,j=o.length>0,f=l.length>0,g=d||j||f,O=j||f,P([].concat(Object(c.a)(l.map((function(e){return{asset:e,status:E.c.UNAVAILABLE}}))),Object(c.a)(o.map((function(e){return{asset:e,status:E.c.REVIEWING_PRICE_CHANGE}}))),Object(c.a)(u.map((function(e){return{asset:e,status:E.c.REVIEWED}}))))),S(!1),g?O?N(j?E.d.IN_REVIEW:E.d.CONFIRM_REVIEW):(Ne(s),N(E.d.CONFIRMING_IN_WALLET)):N(E.d.ADDING_TO_BAG),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(5),N(E.d.ADDING_TO_BAG);case 26:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(){return e.apply(this,arguments)}}();Object(k.useEffect)((function(){H.p.subscribe((function(e){return X.current=e.state}))}),[]),Object(k.useEffect)((function(){z&&!le&&ue(!0)}),[z,le]),Object(k.useEffect)((function(){X.current===E.l.Confirming&&N(E.d.PROCESSING_TRANSACTION),X.current!==E.l.Denied&&X.current!==E.l.Invalid||(X.current===E.l.Invalid?N(E.d.WARNING):N(E.d.CONFIRM_REVIEW),Q(E.l.New),S(!1),ue(!1))}),[X.current]),Object(k.useEffect)((function(){L(ve),B(we)}),[ve,we,L,B]);var Ae=se.length>0,ke=se.length>0,ye=u.length>0,Se=Boolean(!M&&!ke&&x===E.d.ADDING_TO_BAG||M&&!ye),Te=Object(k.useMemo)((function(){return Object(l.a)({usd_value:we},Object(A.k)(se.map((function(e){return e.asset}))))}),[se,we]);return R&&W?Object(C.jsxs)(te.a,{children:[Object(C.jsx)(v.b,{zIndex:q||le?"modalOverTooltip":"3",className:"_1jcz50r1 rgw6ez457 rgw6ez3bj rgw6ez3fe rgw6ez151 rgw6ez1bp rgw6ez361 rgw6ez4lp rgw6ez76v rgw6ez4xd rgw6ez7g3 rgw6ez4aj",children:M&&O===E.i.LISTING?Object(C.jsx)(ee,{}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(_e,{numberOfAssets:M?u.length:se.length,closeBag:Ie,resetFlow:M?s:T,isProfilePage:M}),Se&&Object(C.jsx)(Be,{}),Object(C.jsx)(Ue,{top:!0,show:je&&pe>0}),Object(C.jsx)(v.b,{ref:function(e){if(null!==e){var t=e.scrollHeight>e.clientHeight;t!==je&&fe(t)}},className:"_1jcz50r3 rgw6ez2aj rgw6ez2g1 rgw6ez1vp rgw6ez7jr",onScroll:function(e){var t=e.currentTarget.scrollTop,n=e.currentTarget.clientHeight,r=e.currentTarget.scrollHeight;he(t?(t+n)/r*100:0)},gap:"12",children:M?Object(C.jsx)(Fe,{}):Object(C.jsx)(ze,{})}),Ae&&!M&&Object(C.jsx)(D,{totalEthPrice:ve,totalUsdPrice:we,bagStatus:x,fetchAssets:Ee,eventProperties:Te}),ye&&M&&Object(C.jsx)(m.b,{marginTop:"32",marginX:"28",paddingY:"10",className:"".concat(w.e," ").concat(w.h),backgroundColor:"accentAction",color:"white",textAlign:"center",onClick:function(){q&&_(),p(E.i.LISTING)},children:"Continue"})]})}),U?Object(C.jsx)(Me,{onClick:_}):le&&Object(C.jsx)(ne.a,{onClick:function(){return z?void 0:ue(!1)}})]}):null}}}]);
//# sourceMappingURL=6.7570c0f4.chunk.js.map